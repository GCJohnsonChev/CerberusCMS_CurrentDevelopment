<?php
/*
 ============================================================================================================
 + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 + Cerberus Content Management System
 + ----------------------------------------------------------------------------------------------------------
 + - Author			 : Gary Christopher Johnson of Rosedale In Southern California, U.S.A.
 + - Company			 : Tinke Software, Free and Open Source Software
 + - Company Address		 : Rosedale In Southern California, United States of America
 + - Electronic Mail Address	 : CerberusCMS@Protonmail.com, TinkeSoftware@Protonmail.com
 + - Document Notes		 : View this file in a non-formatting text editor without word-wrap for the
 +				 : correct display of this programming code and its indentation.
 + ----------------------------------------------------------------------------------------------------------
 +    () ()()() --- ()
 +  ()  () () ()()()
 +  ------------------------------
 +  Administration-Level Application Module
 + ----------------------------------------------------------------------------------------------------------
 + - This File, Location	 : Root Directory => Applications => Administration => Forum
 + - This File, Version		 : 0.7.1
 + - This File, Programming Code : Pure Pre-Hyper-Text-Post-Processor
 + - Programming Code Model	 : Procedural, Functional, Object Oriented :: Pre-Order Algebraic
 + -				 :					   :: Pre-Order Logical
 + - Compatibility		 : Pre-Hyper-Text-Post-Processor 	   :: Version Numbers: 5, 7, 8
 + -				 : Zend Engine				   :: Version Numbers: 3, 4
 + - Official Release Date	 : Wednesday, November 1st of 2023
 + ----------------------------------------------------------------------------------------------------------
 + -------------------------------------------------------------------------------	- Nyx -
 + --[][]--[][][]--[][][]--[][][]---[][][]--[][][]--[]--[]------[][][]------------   []++++||=======>
 + -[]-----[]------[]--[]--[]---[]--[]------[]--[]--[]--[]------[]----------------
 + -[]-----[]------[]--[]--[]---[]--[]------[]--[]--[]--[]------[]----------------    |'-._/\_.-'|
 + -[]-----[]------[]--[]--[]---[]--[]------[]--[]--[]--[]------[]----------------    |    []    |
 + -[]-----[]------[]--[]--[]---[]--[]------[]--[]--[]--[]------[]----------------    |___-[]-___|
 + -[]-----[][][]--[][][]--[][][]---[][][]--[][][]--[]--[]------[]----------------    |__((**))__|
 + -[]-----[]------[]--[]--[]---[]--[]------[]--[]--[]--[]------[]----------------    \   -[]-   /
 + -[]-----[]------[]--[]--[]---[]--[]------[]--[]--[]--[]------[]------------/-\-     \   []   /
 + -[]-----[]------[]--[]--[]---[]--[]------[]--[]--[]--[]------[]---VERSION--|4|-	\  []  /
 + --[][]--[][][]--[]--[]--[][][]---[][][]--[]--[]--[][][]--[][][]------------\-/-	 '.[].'
 + -------------------------------------------------------------------------------
 + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Build Number: 0.8 - Final
 + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Edit Number : 3,419
 ============================================================================================================
*/

/*
 ============================================================================================================
 +
 +
 + [ ^ ] Application Module :: Administration :: Forum, Forum Topic, Forum Post Management
 +
 +
 ============================================================================================================
*/

/*
 =============================================================================================================
 +
 + Install Forum Input Form Post Variables
 +
 =============================================================================================================
*/

											echo ("<CENTER><B>Install Forum</B></CENTER><HR>");

$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TITLE				= $_POST['AM_Forum_Install_Forum_Title'];
$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TITLE				= str_replace("'", "&#39;", $_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TITLE);

$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_DESCRIPTION			= $_POST['AM_Forum_Install_Forum_Description'];
$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_DESCRIPTION			= str_replace($_GLOBAL_PLUGIN_SAFEHTML_CODE, $_GLOBAL_PLUGIN_SAFEHTML_CODE_REPLACE, $_Application_Module_Administration_Forum_POST_INSTALL_FORUM_DESCRIPTION);

$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_DESCRIPTION			= str_replace($_GLOBAL_PLUGIN_SAFEHTML_SMILEYS, $_GLOBAL_PLUGIN_SAFEHTML_SMILEYS_REPLACE, $_Application_Module_Administration_Forum_POST_INSTALL_FORUM_DESCRIPTION);
$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_ACCESS_LEVEL			= $_POST['AM_Forum_Install_Forum_Access_Level'];

/*
 =============================================================================================================
 +
 + Install Forum Input Form
 +
 =============================================================================================================
*/

/*
 =============================================================================================================
 + IF: Form Has Not Posted, Display Form
 =============================================================================================================
*/

if ((!$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TITLE) || (!$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_DESCRIPTION)) {

echo ("
											<FORM ACTION=\"?$_INTERNAL_APPLICATION_MODULE_ADMINISTRATOR&#61;Control_Panel&amp;Action&#61;Forum\" METHOD=\"POST\">
												Forum Title: ( Maximum Length: 100 Characters )<BR>
													<INPUT TYPE=\"TEXT\" MAXLENGTH=\"200\" NAME=\"AM_Forum_Install_Forum_Title\"><BR>
												Forum Access Level:<BR>
													<SELECT NAME=\"AM_Forum_Install_Forum_Access_Level\">
														<OPTION VALUE=\"0\">Non-Registered</OPTION>
														<OPTION VALUE=\"1\">Member</OPTION>
														<OPTION VALUE=\"2\">Locked</OPTION>
														<OPTION VALUE=\"3\">Administration</OPTION>
														<OPTION VALUE=\"4\">Services Root Administration</OPTION>
													</SELECT><BR>
												Forum Description:<BR>
													<TEXTAREA ROWS=\"15\" COLS=\"75\" NAME=\"AM_Forum_Install_Forum_Description\">Description of this Forum...</TEXTAREA><BR>
												<INPUT TYPE=\"SUBMIT\" VALUE=\"Install Forum\">
											</FORM><BR><BR>
");

} else {

if (strlen($_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TITLE) > "100") {

											echo ($_Application_Module_Administration_Message_Forum_FORUM_TITLE_TOO_LONG);

} else {

if (strlen($_Application_Module_Administration_Forum_POST_INSTALL_FORUM_DESCRIPTION) > "100") {

											echo ($_Application_Module_Administration_Message_Forum_FORUM_DESCRIPTION_TOO_LONG);

} else {

$_Application_Module_Administration_Forum_DB_Query_INSTALL_FORUM 				= $DB->query("INSERT INTO {$_ACCESS_DATABASE_SERVER_DATABASE_TABLE_PREFIX}_forum_forum(forum_access_level,forum_date,forum_description,forum_title)VALUES('$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_ACCESS_LEVEL','$_GLOBAL_LOCAL_SERVER_DATE_STANDARD','$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_DESCRIPTION','$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TITLE')");

if ($_Application_Module_Administration_Forum_DB_Query_INSTALL_FORUM) {

											echo ($_Application_Module_Administration_Message_Forum_INSTALL_FORUM_SUCCESSFUL);

} else {

											echo ($_Application_Module_Administration_Message_Forum_INSTALL_FORUM_ERROR);

} // [ + ] IF: String Length: Forum Title IS Greater Than 100 Characters

} // [ + ] IF: String Length: Forum Description IS Greater Than 100 Characters

} // [ + ] IF: Database Server Query: Install Forum

/*
 =============================================================================================================
 + Kill SQL Database Server Query: Install Forum
 =============================================================================================================
*/

$DB->free($_Application_Module_Administration_Forum_DB_Query_INSTALL_FORUM);

} // [ + ] IF: Install Forum Form Variables Have Not Executed

/*
 =============================================================================================================
 +
 + Display Existing Forum Entries
 +
 =============================================================================================================
*/

											echo ("<HR><CENTER><B>Existing Forum Entries</B></CENTER><HR>");

$_Application_Module_Administration_Forum_DB_Query_SELECT_FORUMS 				= $DB->query("SELECT * FROM {$_ACCESS_DATABASE_SERVER_DATABASE_TABLE_PREFIX}_forum_forum");

if ($DB->num_rows($_Application_Module_Administration_Forum_DB_Query_SELECT_FORUMS) <= 0) {

											echo ($_Application_Module_Administration_Message_Forum_NO_FORUMS_EXIST);

} // [ + ] IF: Forum Entry Number of Rows IS Less Than Or Equal To Zero

while ($_Application_Module_Administration_Forum_DB_Query_SELECT_FORUMS_Fetch_Array = $DB->fetch_array($_Application_Module_Administration_Forum_DB_Query_SELECT_FORUMS)) {

/*
 =============================================================================================================
 + List Forum Entries Variables
 =============================================================================================================
*/

$_Application_Module_Administration_Forum_LIST_FORUM_ID 					= $_Application_Module_Administration_Forum_DB_Query_SELECT_FORUMS_Fetch_Array['id'];
$_Application_Module_Administration_Forum_LIST_FORUM_ACCESS_LEVEL				= $_Application_Module_Administration_Forum_DB_Query_SELECT_FORUMS_Fetch_Array['forum_access_level'];
$_Application_Module_Administration_Forum_LIST_FORUM_DATE					= $_Application_Module_Administration_Forum_DB_Query_SELECT_FORUMS_Fetch_Array['forum_date'];
$_Application_Module_Administration_Forum_LIST_FORUM_DESCRIPTION				= $_Application_Module_Administration_Forum_DB_Query_SELECT_FORUMS_Fetch_Array['forum_description'];
$_Application_Module_Administration_Forum_LIST_FORUM_TITLE					= $_Application_Module_Administration_Forum_DB_Query_SELECT_FORUMS_Fetch_Array['forum_title'];

echo ("
													<CENTER>
														<TABLE BORDER=\"0\" WIDTH=\"100%\" CELLPADDING=\"0\" CELLSPACING=\"0\">
															<TR>
																<TD WIDTH=\"90%\">Forum Name: <B>$_Application_Module_Administration_Forum_LIST_FORUM_TITLE</B></TD>
																<TD WIDTH=\"5%\"><A HREF=\"?$_INTERNAL_APPLICATION_MODULE_ADMINISTRATOR&#61;Control_Panel&amp;Action&#61;Forum&amp;UpdateForumID&#61;$_Application_Module_Administration_Forum_LIST_FORUM_ID\" TITLE=\":: Update The Forum: $_Application_Module_Administration_Forum_LIST_FORUM_TITLE ::\">Update</A></TD>
																<TD WIDTH=\"5%\"><A HREF=\"?$_INTERNAL_APPLICATION_MODULE_ADMINISTRATOR&#61;Control_Panel&amp;Action&#61;Forum&amp;DeleteForumID&#61;$_Application_Module_Administration_Forum_LIST_FORUM_ID\" TITLE=\":: Delete The Forum: $_Application_Module_Administration_Forum_LIST_FORUM_TITLE ::\">Delete</A></TD>
															</TR>
														</TABLE>
													</CENTER>
");

/*
 =============================================================================================================
 +
 + Update Selected Forum ID
 +
 =============================================================================================================
*/

if ($_GET["UpdateForumID"] == "$_Application_Module_Administration_Forum_LIST_FORUM_ID") {

/*
 =============================================================================================================
 + Update Forum Form Variables
 =============================================================================================================
*/

$_Application_Module_Administration_Forum_POST_FORUM_UPDATE_TITLE				= $_POST['AM_Forum_Update_Forum_Title'];
$_Application_Module_Administration_Forum_POST_FORUM_UPDATE_TITLE				= str_replace("'", "&#39;", $_Application_Module_Administration_Forum_POST_FORUM_UPDATE_TITLE);

$_Application_Module_Administration_Forum_POST_FORUM_UPDATE_DATE				= $_POST['AM_Forum_Update_Forum_Date'];
$_Application_Module_Administration_Forum_POST_FORUM_UPDATE_ACCESS_LEVEL			= $_POST['AM_Forum_Update_Forum_Access_Level'];
$_Application_Module_Administration_Forum_POST_FORUM_UPDATE_DESCRIPTION				= $_POST['AM_Forum_Update_Forum_Description'];

$_Application_Module_Administration_Forum_POST_FORUM_UPDATE_DESCRIPTION				= str_replace($_GLOBAL_PLUGIN_SAFEHTML_CODE, $_GLOBAL_PLUGIN_SAFEHTML_CODE_REPLACE, $_Application_Module_Administration_Forum_POST_FORUM_UPDATE_DESCRIPTION);
$_Application_Module_Administration_Forum_POST_FORUM_UPDATE_DESCRIPTION				= str_replace($_GLOBAL_PLUGIN_SAFEHTML_SMILEYS, $_GLOBAL_PLUGIN_SAFEHTML_SMILEYS_REPLACE, $_Application_Module_Administration_Forum_POST_FORUM_UPDATE_DESCRIPTION);

/*
 =============================================================================================================
 +
 + Update Selected Forum Form
 +
 =============================================================================================================
*/

/*
 =============================================================================================================
 + IF: Update Forum Form Has Not Posted, Display Update Forum Form
 =============================================================================================================
*/

if (!$_Application_Module_Administration_Forum_POST_FORUM_UPDATE_TITLE) {

echo ("
													<BR><HR><CENTER><B>Currently Updating The Forum</B>: <I>$_Application_Module_Administration_Forum_LIST_FORUM_TITLE</I></CENTER><HR><BR>

													<FORM ACTION=\"?$_INTERNAL_APPLICATION_MODULE_ADMINISTRATOR&#61;Control_Panel&amp;Action&#61;Forum&amp;UpdateForumID&#61;$_Application_Module_Administration_Forum_LIST_FORUM_ID\" METHOD=\"POST\">
														Update Forum Title:<BR>
															<INPUT TYPE=\"TEXT\" NAME=\"AM_Forum_Update_Forum_Title\" VALUE=\"$_Application_Module_Administration_Forum_LIST_FORUM_TITLE\" MAXLENGTH=\"250\"><BR>
														Update Forum Installation Date:<BR>
															<INPUT TYPE=\"TEXT\" NAME=\"AM_Forum_Update_Forum_Date\" VALUE=\"$_Application_Module_Administration_Forum_LIST_FORUM_DATE\" MAXLENGTH=\"250\"><BR>
														Update Forum Access Level:<BR>
															<SELECT NAME=\"AM_Forum_Update_Access_Level\">
																<OPTION VALUE=\"0\">Non-Registered</OPTION>
																<OPTION VALUE=\"1\">Member</OPTION>
																<OPTION VALUE=\"2\">Locked</OPTION>
																<OPTION VALUE=\"3\">Administration</OPTION>
																<OPTION VALUE=\"4\">Services Root Administration</OPTION>
															</SELECT><BR>
														Update Forum Description:<BR>
															<TEXTAREA ROWS=\"15\" COLS=\"75\" NAME=\"AM_Forum_Update_Forum_Description\">$_Application_Module_Administration_Forum_LIST_FORUM_DESCRIPTION</TEXTAREA><BR>
														<INPUT TYPE=\"SUBMIT\" VALUE=\"Update\">
													</FORM><BR>
");

} else {

$_Application_Module_Administration_Forum_DB_Query_UPDATE_FORUM					= $DB->query("UPDATE {$_ACCESS_DATABASE_SERVER_DATABASE_TABLE_PREFIX}_forum_forum SET forum_access_level='$_Application_Module_Administration_Forum_POST_FORUM_UPDATE_ACCESS_LEVEL',forum_date='$_Application_Module_Administration_Forum_POST_FORUM_UPDATE_DATE',forum_description='$_Application_Module_Administration_Forum_POST_FORUM_UPDATE_DESCRIPTION',forum_title='$_Application_Module_Administration_Forum_POST_FORUM_UPDATE_TITLE' WHERE id='$_Application_Module_Administration_Forum_LIST_FORUM_ID'");

if ($_Application_Module_Administration_Forum_DB_Query_UPDATE_FORUM) {

													echo ($_Application_Module_Administration_Message_Forum_FORUM_UPDATED_SUCCESSFULLY);

} else {

													echo ($_Application_Module_Administration_Message_Forum_FORUM_UPDATE_ERROR);

} // [ + ] IF: Database Server Query: Update Selected Forum Entry

/*
 =============================================================================================================
 + Kill SQL Database Server Query: Update Forum
 =============================================================================================================
*/

$DB->free($_Application_Module_Administration_Forum_DB_Query_UPDATE_FORUM);

} // [ + ] IF: Update Forum Form Variables Have Not Executed

} // [ + ] IF: Internal Application: Update Forum Is: Activated

/*
 =============================================================================================================
 +
 + Delete Selected Forum ID
 +
 =============================================================================================================
*/

if ($_GET["DeleteForumID"] == "$_Application_Module_Administration_Forum_LIST_FORUM_ID") {

$_Application_Module_Administration_Forum_DB_Query_DELETE_FORUM					= $DB->query("DELETE FROM {$_ACCESS_DATABASE_SERVER_DATABASE_TABLE_PREFIX}_forum_forum WHERE ID='$_Application_Module_Administration_Forum_LIST_FORUM_ID'");

if ($_Application_Module_Administration_Forum_DB_Query_DELETE_FORUM) {

													echo ($_Application_Module_Administration_Message_Forum_FORUM_DELETED_SUCCESSFULLY);

} else {

													echo ($_Application_Module_Administration_Message_Forum_FORUM_DELETE_ERROR);

} // [ + ] IF: Database Server Query: Delete Forum By ID

$DB->free($_Application_Module_Administration_Forum_DB_Query_DELETE_FORUM);

} // [ + ] IF: Internal Application: Delete Forum IS Activated

} // [ + ] WHILE: Retrieving Forum Entries

/*
 =============================================================================================================
 + Kill SQL Database Server Query: Delete Forum ID
 =============================================================================================================
*/

$DB->free($_Application_Module_Administration_Forum_DB_Query_SELECT_FORUMS);

/*
 ============================================================================================================
 +
 +
 + Install / Delete / Update Topic(s)
 +
 +
 ============================================================================================================
*/

/*
 =============================================================================================================
 +
 + Install Forum Topic Form Variables
 +
 =============================================================================================================
*/

$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_TITLE			= $_POST['AM_Forum_Install_Forum_Topic_Title'];
$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_TITLE			= str_replace("'", "&#39;", $_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_TITLE);

$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_FORUM_ID			= $_POST['AM_Forum_Install_Forum_Topic_ID'];
$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_ACCESS_LEVEL			= $_POST['AM_Forum_Install_Forum_Topic_Access_Level'];
$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_DESCRIPTION			= $_POST['AM_Forum_Install_Forum_Topic_Description'];

$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_DESCRIPTION			= str_replace($_GLOBAL_PLUGIN_SAFEHTML_CODE, $_GLOBAL_PLUGIN_SAFEHTML_CODE_REPLACE, $_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_DESCRIPTION);
$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_DESCRIPTION			= str_replace($_GLOBAL_PLUGIN_SAFEHTML_SMILEYS, $_GLOBAL_PLUGIN_SAFEHTML_SMILEYS_REPLACE, $_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_DESCRIPTION);

/*
 =============================================================================================================
 +
 + Install Forum Topic Form
 +
 =============================================================================================================
*/

if (!$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_TITLE) {

echo ("
											<BR><HR><CENTER><B>Install Forum Topic</B></CENTER><HR>
											<FORM ACTION=\"?$_INTERNAL_APPLICATION_MODULE_ADMINISTRATOR&#61;Control_Panel&amp;Action&#61;Forum\" METHOD=\"POST\">
												Forum Topic Title: ( Maximum Length: 100 Characters )<BR>
													<INPUT TYPE=\"TEXT\" MAXLENGTH=\"100\" NAME=\"AM_Forum_Install_Forum_Topic_Title\"><BR>
												Forum:<BR>
													<SELECT NAME=\"AM_Forum_Install_Forum_Topic_ID\">
");

$_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_FOR_TOPICS			= $DB->query("SELECT * FROM {$_ACCESS_DATABASE_SERVER_DATABASE_TABLE_PREFIX}_forum_forum");

while ($_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_FOR_TOPICS_Fetch_Array = $DB->fetch_array($_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_FOR_TOPICS)) {

$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_FORUM_ID				= $_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_FOR_TOPICS_Fetch_Array['id'];
$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_FORUM_TITLE				= $_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_FOR_TOPICS_Fetch_Array['forum_title'];

											echo ("<OPTION VALUE=\"$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_FORUM_ID\">$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_FORUM_TITLE</OPTION>");

} // [ + ] WHILE: Retrieving List of Forum Topic Entries From Database

/*
 =============================================================================================================
 + Kill SQL Database Server Query: Select All Forum Topics
 =============================================================================================================
*/

$DB->free($_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_FOR_TOPICS);

echo ("
													</SELECT>
													<BR>
												Forum Topic Access Level:<BR>
													<SELECT NAME=\"AM_Forum_Install_Forum_Topic_Access_Level\">
														<OPTION VALUE=\"0\">Non-Registered</OPTION>
														<OPTION VALUE=\"1\">Member</OPTION>
														<OPTION VALUE=\"2\">Locked</OPTION>
														<OPTION VALUE=\"3\">Administration</OPTION>
														<OPTION VALUE=\"4\">Services Root Administration</OPTION>
													</SELECT><BR>
												Forum Topic Description: ( Maximum Length: 100 Characters )<BR>
													<TEXTAREA ROWS=\"15\" COLS=\"75\" NAME=\"AM_Forum_Install_Forum_Topic_Description\">Description of this Topic...</TEXTAREA><BR>
												<INPUT TYPE=\"SUBMIT\" VALUE=\"Install Topic\">
											</FORM><BR>
");

} else {

$_Application_Module_Administration_Forum_DB_Query_INSTALL_FORUM_TOPIC				= $DB->query("INSERT INTO {$_ACCESS_DATABASE_SERVER_DATABASE_TABLE_PREFIX}_forum_topic(topic_access_level,topic_date,topic_description,topic_forum_id,topic_last_post,topic_last_poster,topic_title)VALUES('$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_ACCESS_LEVEL','$_GLOBAL_LOCAL_SERVER_DATE_STANDARD','$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_DESCRIPTION','$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_FORUM_ID','$_GLOBAL_LOCAL_SERVER_DATE_STANDARD','$_GLOBAL_USERNAME','$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_TITLE')");

if ($_Application_Module_Administration_Forum_DB_Query_INSTALL_FORUM_TOPIC) {

											echo ($_Application_Module_Administration_Message_Forum_INSTALL_FORUM_TOPIC_SUCCESSFUL);

} else {

											echo ($_Application_Module_Administration_Message_Forum_INSTALL_FORUM_TOPIC_ERROR);

} // [ + ] IF: Database Server Query: Install Forum Topic Entry

/*
 =============================================================================================================
 + Kill SQL Database Server Query: Create Forum Topic
 =============================================================================================================
*/

$DB->free($_Application_Module_Administration_Forum_DB_Query_INSTALL_FORUM_TOPIC);

} // [ + ] IF: Install Forum Topic Entry Form Variables Have NOT Executed

/*
 =============================================================================================================
 +
 + Forum Topic Delete / Manage Form
 +
 =============================================================================================================
*/

$_Application_Module_Administration_Forum_DB_Query_SELECT_TOPICS				= $DB->query("SELECT * FROM {$_ACCESS_DATABASE_SERVER_DATABASE_TABLE_PREFIX}_forum_topic");

													echo ("<HR><CENTER><B>Existing Topic Entries</B></CENTER><HR>");

if ($DB->num_rows($_Application_Module_Administration_Forum_DB_Query_SELECT_TOPICS) <=0) {

													echo ($_Application_Module_Administration_Message_Forum_NO_TOPICS_EXIST);

} else {

while ($_Application_Module_Administration_Forum_DB_Query_SELECT_TOPICS_Fetch_Array = $DB->fetch_array($_Application_Module_Administration_Forum_DB_Query_SELECT_TOPICS)) {

/*
 =============================================================================================================
 + List Forum Topic Entries
 =============================================================================================================
*/

$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_ID					= $_Application_Module_Administration_Forum_DB_Query_SELECT_TOPICS_Fetch_Array['id'];
$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_ACCESS_LEVEL				= $_Application_Module_Administration_Forum_DB_Query_SELECT_TOPICS_Fetch_Array['topic_access_level'];
$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_DATE					= $_Application_Module_Administration_Forum_DB_Query_SELECT_TOPICS_Fetch_Array['topic_date'];
$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_DESCRIPTION				= $_Application_Module_Administration_Forum_DB_Query_SELECT_TOPICS_Fetch_Array['topic_description'];
$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_FORUM_ID				= $_Application_Module_Administration_Forum_DB_Query_SELECT_TOPICS_Fetch_Array['topic_forum_id'];
$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_LAST_POST				= $_Application_Module_Administration_Forum_DB_Query_SELECT_TOPICS_Fetch_Array['topic_last_post'];
$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_LAST_POSTER				= $_Application_Module_Administration_Forum_DB_Query_SELECT_TOPICS_Fetch_Array['topic_last_poster'];
$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_TITLE				= $_Application_Module_Administration_Forum_DB_Query_SELECT_TOPICS_Fetch_Array['topic_title'];

echo ("
													<CENTER>
														<TABLE BORDER=\"0\" WIDTH=\"100%\" CELLPADDING=\"0\" CELLSPACING=\"0\">
															<TR>
																<TD WIDTH=\"90%\">Forum Topic Name: <B>$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_TITLE</B></TD>
																<TD WIDTH=\"5%\"><A HREF=\"?$_INTERNAL_APPLICATION_MODULE_ADMINISTRATOR&#61;Control_Panel&amp;Action&#61;Forum&amp;UpdateTopicID&#61;$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_ID\" TITLE=\":: Update The Forum Topic: $_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_TITLE ::\">Update</A></TD>
																<TD WIDTH=\"5%\"><A HREF=\"?$_INTERNAL_APPLICATION_MODULE_ADMINISTRATOR&#61;Control_Panel&amp;Action&#61;Forum&amp;DeleteTopicID&#61;$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_ID\" TITLE=\":: Delete The Forum Topic: $_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_TITLE ::\">Delete</A></TD>
															</TR>
														</TABLE>
													</CENTER>
");

/*
 =============================================================================================================
 +
 + Update Selected Forum Topic ID
 +
 =============================================================================================================
*/

if ($_GET["UpdateTopicID"] == "$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_ID") {

/*
 =============================================================================================================
 + Update Forum Topic Form Variables
 =============================================================================================================
*/

$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_TITLE				= $_POST['AM_Forum_Update_Forum_Topic_Title'];
$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_TITLE				= str_replace("'", "&#39;", $_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_TITLE);

$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_DATE				= $_POST['AM_Forum_Update_Forum_Topic_Date'];
$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_ACCESS_LEVEL			= $_POST['AM_Forum_Update_Forum_Topic_Access_Level'];
$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_FORUM_ID			= $_POST['AM_Forum_Update_Forum_Topic_Forum_ID'];
$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_LAST_POST			= $_POST['AM_Forum_Update_Forum_Topic_Last_Post'];
$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_LAST_POSTER			= $_POST['AM_Forum_Update_Forum_Topic_Last_Poster'];
$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_DESCRIPTION			= $_POST['AM_Forum_Update_Forum_Topic_Description'];

$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_DESCRIPTION			= str_replace($_GLOBAL_PLUGIN_SAFEHTML_CODE, $_GLOBAL_PLUGIN_SAFEHTML_CODE_REPLACE, $_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_DESCRIPTION);
$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_DESCRIPTION			= str_replace($_GLOBAL_PLUGIN_SAFEHTML_SMILEYS, $_GLOBAL_PLUGIN_SAFEHTML_SMILEYS_REPLACE, $_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_DESCRIPTION);

/*
 =============================================================================================================
 + Update Forum Topic Form
 =============================================================================================================
*/

if (!$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_TITLE) {

echo ("
													<BR><HR><CENTER><B>Currently Updating The Forum Topic</B>: <I>$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_TITLE</I></CENTER><HR>
													<FORM ACTION=\"?$_INTERNAL_APPLICATION_MODULE_ADMINISTRATOR&#61;Control_Panel&amp;Action&#61;Forum&amp;UpdateTopicID&#61;$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_ID\" METHOD=\"POST\">
														Forum Topic Title:<BR>
															<INPUT TYPE=\"TEXT\" NAME=\"AM_Forum_Update_Forum_Topic_Title\" VALUE=\"$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_TITLE\"><BR>
														Forum Topic Creation Date:<BR>
															<INPUT TYPE=\"TEXT\" NAME=\"AM_Forum_Update_Forum_Topic_Date\" VALUE=\"$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_DATE\"><BR>
														Forum Topic Access Level:<BR>
															<SELECT NAME=\"AM_Forum_Update_Forum_Topic_Access_Level\">
																<OPTION VALUE=\"0\">Non-Registered</OPTION>
																<OPTION VALUE=\"1\">Member</OPTION>
																<OPTION VALUE=\"2\">Locked</OPTION>
																<OPTION VALUE=\"3\">Administration</OPTION>
																<OPTION VALUE=\"4\">Services Root Administration</OPTION>
															</SELECT><BR>
														Forum: ( Current: $_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_FORUM_ID )<BR>
															<SELECT NAME=\"AM_Forum_Update_Forum_Topic_Forum_ID\">
");

$_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_FOR_UPDATE_TOPIC = $DB->query("SELECT * FROM {$_ACCESS_DATABASE_SERVER_DATABASE_TABLE_PREFIX}_forum_forum ORDER BY id ASC");

while ($_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_FOR_UPDATE_TOPIC_Fetch_Array = $DB->fetch_array($_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_FOR_UPDATE_TOPIC)) {

$_Application_Module_Administration_Forum_LIST_FORUM_UPDATE_ID					= $_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_FOR_UPDATE_TOPIC_Fetch_Array['id'];
$_Application_Module_Administration_Forum_LIST_FORUM_UPDATE_TITLE				= $_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_FOR_UPDATE_TOPIC_Fetch_Array['forum_title'];

														echo ("<OPTION VALUE=\"$_Application_Module_Administration_Forum_LIST_FORUM_UPDATE_ID\">$_Application_Module_Administration_Forum_LIST_FORUM_UPDATE_ID: $_Application_Module_Administration_Forum_LIST_FORUM_UPDATE_TITLE</OPTION>");

} // [ + ] WHILE: Retrieving Forum Topic Entries From Database

/*
 =============================================================================================================
 + Kill SQL Database Server Query: Update Forum Topic
 =============================================================================================================
*/

$DB->free($_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_FOR_UPDATE_TOPIC);

echo ("
															</SELECT><BR>
														Forum Topic Last Post:<BR>
															<INPUT TYPE=\"TEXT\" NAME=\"AM_Forum_Update_Forum_Topic_Last_Post\" VALUE=\"$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_LAST_POST\"><BR>
														Forum Topic Last Poster:<BR>
															<INPUT TYPE=\"TEXT\" NAME=\"AM_Forum_Update_Forum_Topic_Last_Poster\" VALUE=\"$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_LAST_POSTER\"><BR>
														Forum Topic Description:<BR>
															<TEXTAREA ROWS=\"15\" COLS=\"75\" NAME=\"AM_Forum_Update_Forum_Topic_Description\">$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_DESCRIPTION</TEXTAREA><BR>
														<INPUT TYPE=\"SUBMIT\" VALUE=\"Update\">
													</FORM><BR>
");

} else {

$_Application_Module_Administration_Forum_DB_Query_UPDATE_FORUM_TOPIC				= $DB->query("UPDATE {$_ACCESS_DATABASE_SERVER_DATABASE_TABLE_PREFIX}_forum_topic SET topic_access_level='$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_ACCESS_LEVEL',topic_date='$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_DATE',topic_description='$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_DESCRIPTION',topic_forum_id='$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_FORUM_ID',topic_last_post='$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_LAST_POST',topic_last_poster='$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_LAST_POSTER',topic_title='$_Application_Module_Administration_Forum_POST_UPDATE_FORUM_TOPIC_TITLE' WHERE ID='$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_ID'");

if ($_Application_Module_Administration_Forum_DB_Query_UPDATE_FORUM_TOPIC) {

													echo ($_Application_Module_Administration_Message_Forum_FORUM_TOPIC_UPDATED_SUCCESSFULLY);

} else {

													echo ($_Application_Module_Administration_Message_Forum_FORUM_TOPIC_UPDATE_ERROR);

} // [ + ] IF: Database Server Query: Update Forum Topic Entry

/*
 =============================================================================================================
 + Kill SQL Database Server Query: Update Forum Topic
 =============================================================================================================
*/

$DB->free($_Application_Module_Administration_Forum_DB_Query_UPDATE_FORUM_TOPIC);

} // [ + ] IF: Update Forum Topic Form Variables Have NOT Executed

} // [ + ] IF: Internal Application: Update Forum Topic

/*
 =============================================================================================================
 +
 + Delete Selected Forum Topic ID
 +
 =============================================================================================================
*/

if ($_GET["DeleteTopicID"] == "$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_ID") {

$_Application_Module_Administration_Forum_DB_Query_DELETE_FORUM_TOPIC					= $DB->query("DELETE FROM {$_ACCESS_DATABASE_SERVER_DATABASE_TABLE_PREFIX}_forum_topic WHERE ID='$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_ID'");

if ($_Application_Module_Administration_Forum_DB_Query_DELETE_FORUM_TOPIC) {

													echo ($_Application_Module_Administration_Message_Forum_FORUM_TOPIC_DELETED_SUCCESSFULLY);

} else {

													echo ($_Application_Module_Administration_Message_Forum_FORUM_TOPIC_DELETE_ERROR);

} // [ + ] IF: Database Server Query: Delete Forum Topic By ID

/*
 =============================================================================================================
 + Kill SQL Database Server Query: Delete Forum Topic
 =============================================================================================================
*/

$DB->free($_Application_Module_Administration_Forum_DB_Query_DELETE_FORUM_TOPIC);

} // [ + ] IF: Database Server Query: Delete Forum Topic By ID

} // [ + ] IF: Number of Rows For Forum Topic Exists

} // [ + ] WHILE: Retrieving Forum Topic Entries

/*
 =============================================================================================================
 + Kill SQL Database Server Query: Select All Forum Topics
 =============================================================================================================
*/

$DB->free($_Application_Module_Administration_Forum_DB_Query_SELECT_TOPICS);

/*
 ===========================================================================================================================
 +
 +
 + Create / Update / Delete Forum Topic Post(s)
 +
 +
 ===========================================================================================================================
*/

/*
 =============================================================================================================
 + Create Post Form Variables
 =============================================================================================================
*/

$_Application_Module_Administration_Forum_POST_CREATE_POST_TOPIC_ID				= $_POST['AM_Forum_Install_Forum_Topic_ID_Option'];
$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_MESSAGE			= $_POST['AM_Forum_Install_Forum_Topic_Message'];
$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_MESSAGE_ACCESS_LEVEL		= $_POST['AM_Forum_Install_Forum_Topic_Message_Access_Level'];

$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_MESSAGE			= str_replace($_GLOBAL_PLUGIN_SAFEHTML_CODE, $_GLOBAL_PLUGIN_SAFEHTML_CODE_REPLACE, $_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_MESSAGE);
$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_MESSAGE			= str_replace($_GLOBAL_PLUGIN_SAFEHTML_SMILEYS, $_GLOBAL_PLUGIN_SAFEHTML_SMILEYS_REPLACE, $_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_MESSAGE);

if ((!$_Application_Module_Administration_Forum_POST_CREATE_POST_TOPIC_ID) || (!$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_MESSAGE)) {

echo ("
											<BR><HR><CENTER><B>Post Message</B></CENTER><HR>
											<FORM ACTION=\"?$_INTERNAL_APPLICATION_MODULE_ADMINISTRATOR&#61;Control_Panel&amp;Action&#61;Forum\" METHOD=\"POST\">
												Topic:<BR>
													<SELECT NAME=\"AM_Forum_Install_Forum_Topic_ID_Option\">
");

$_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_TOPIC_FOR_MESSAGE		= $DB->query("SELECT * FROM {$_ACCESS_DATABASE_SERVER_DATABASE_TABLE_PREFIX}_forum_topic ORDER BY id ASC");

while ($_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_TOPIC_FOR_MESSAGE_Fetch_Array = $DB->fetch_array($_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_TOPIC_FOR_MESSAGE)) {

/*
 =============================================================================================================
 + List Forum Topic Entries
 =============================================================================================================
*/

$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_ID_FOR_MESSAGE			= $_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_TOPIC_FOR_MESSAGE_Fetch_Array['id'];
$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_TITLE_FOR_MESSAGE			= $_Application_Module_Administration_Forum_DB_Query_SELECT_FORUM_TOPIC_FOR_MESSAGE_Fetch_Array['topic_title'];

echo ("
													<OPTION VALUE=\"$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_ID_FOR_MESSAGE\">$_Application_Module_Administration_Forum_LIST_FORUM_TOPIC_TITLE_FOR_MESSAGE</OPTION>
");

} // [ + ] WHILE: Retrieving Forum Topic Message Entries

echo ("
													</SELECT>
													<BR>
												Message Access Level:<BR>
													<SELECT NAME=\"AM_Forum_Install_Forum_Topic_Message_Access_Level\">
														<OPTION VALUE=\"0\">Non-Registered</OPTION>
														<OPTION VALUE=\"1\">Member</OPTION>
														<OPTION VALUE=\"2\">Locked</OPTION>
														<OPTION VALUE=\"3\">Administration</OPTION>
														<OPTION VALUE=\"4\">Services Root Administration</OPTION>
													</SELECT><BR>
												Message:<BR>
													<TEXTAREA ROWS=\"15\" COLS=\"75\" NAME=\"AM_Forum_Install_Forum_Topic_Message\">Message...</TEXTAREA><BR>
												<INPUT TYPE=\"SUBMIT\" VALUE=\"Post Message\">
											</FORM>
");

} else {

$_Application_Module_Administration_Forum_DB_Query_INSTALL_FORUM_TOPIC_MESSAGE			= $DB->query("INSERT INTO {$_ACCESS_DATABASE_SERVER_DATABASE_TABLE_PREFIX}_forum_post(post_access_level,post_author,post_data,post_date,post_last_edit,post_topic_id)VALUES('$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_MESSAGE_ACCESS_LEVEL','$_GLOBAL_USERNAME','$_Application_Module_Administration_Forum_POST_INSTALL_FORUM_TOPIC_MESSAGE','$_GLOBAL_LOCAL_SERVER_DATE_STANDARD','N/A','$_Application_Module_Administration_Forum_POST_CREATE_POST_TOPIC_ID')");

if ($_Application_Module_Administration_Forum_DB_Query_INSTALL_FORUM_TOPIC_MESSAGE) {

											echo ($_Application_Module_Administration_Message_Forum_FORUM_TOPIC_MESSAGE_POSTED_SUCCESSFULLY);

} else {

											echo ($_Application_Module_Administration_Message_Forum_FORUM_TOPIC_MESSAGE_POST_ERROR);

} // [ + ] IF: Database Server Query: Install Forum Topic Entry Message

/*
 =============================================================================================================
 + Kill SQL Database Server Query: Create Forum Topic Post Entry
 =============================================================================================================
*/

$DB->free($_Application_Module_Administration_Forum_DB_Query_INSTALL_FORUM_TOPIC_MESSAGE);

} // [ + ] IF: Create Forum Topic Message Form Variables Have Executed
?>